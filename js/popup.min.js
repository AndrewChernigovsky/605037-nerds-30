const popupEmailLink=document.querySelector(".btn-write"),popupEmail=document.querySelector(".popup-email"),popupEmailClose=popupEmail.querySelector(".modal-close"),popupForm=popupEmail.querySelector("form"),userName=popupEmail.querySelector("[name=name]"),userEmail=popupEmail.querySelector("[name=email]"),userComment=popupEmail.querySelector("[name=comment]");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}popupEmailLink.addEventListener("click",function(e){e.preventDefault(),console.log("Кнопка нажата"),popupEmailLink&&(popupEmail.classList.add("modal-show"),userName.focus(),storage?(userEmail.value=storage,userName.focus()):userComment.focus())}),popupEmailClose.addEventListener("click",function(e){e.preventDefault(),popupEmail.classList.remove("modal-error"),popupEmail.classList.remove("modal-show"),console.log("закрыть")}),popupForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userComment.value?isStorageSupport&&localStorage.setItem("userEmail",userEmail.value):(e.preventDefault(),popupEmail.classList.remove("modal-error"),popupEmail.offsetWidth=popupEmail.offsetWidth,popupEmail.classList.add("modal-error"),console.log("Нужно ввести имя эмайл и написать текст"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupEmail.classList.contains("modal-show")&&(e.preventDefault(),popupEmail.classList.remove("modal-show"),popupEmail.classList.remove("modal-error"))});
